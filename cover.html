<!--
  ~ Copyright (c) Valentin Sickert
  ~
  ~  Permission is hereby granted, free of charge, to any person obtaining a copy of this
  ~  software and associated documentation files (the "Software"), to deal in the Software
  ~  without restriction, including without limitation the rights to use, copy, modify, merge,
  ~  publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons
  ~  to whom the Software is furnished to do so, subject to the following conditions:
  ~
  ~  The above copyright notice and this permission notice shall be included in all copies or
  ~  substantial portions of the Software.
  ~
  ~  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
  ~  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
  ~  PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE
  ~  FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
  ~  OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  ~  DEALINGS IN THE SOFTWARE.
  -->

<!--
  ~ Created by: Valentin Sickert
  ~ Date: 29.10.18 23:41
  ~ Project: cover-display
  -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Valentin Sickert">
    <link rel="stylesheet" type="text/css" href="./assets/css/cover.min.css">
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css">
    <title>Title</title>

    <style>
        * {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div style="position: relative; display: inline-block">
    <img id="image" src="" alt="">
    <div id="live" class="hidden in"><p><i class="fas fa-circle notLive"></i>&nbsp;&nbsp;<span>Off Air</span></p></div>
</div>



<script src="./assets/js/jquery-3.3.1.min.js" type="text/javascript"></script>
<script src="./assets/js/functions.js" type="text/javascript"></script>
<script>
    let station = $_GET('station');
    let station_url = "https://api.laut.fm/station/" + station;
    let song_url = "https://api.laut.fm/station/" + station + "/current_song";
    let show_onair = $_GET('onair');
    let onair_display = $_GET('position');

    let width = $_GET('width');
    let height;
    if ($_GET('height') == null) {
        height = width
    } else {
        height = $_GET('height');
    }

    let live = false;
    let song_str;
    let station_img_url;

    $('#live').css('width', width);

    if (show_onair == 'true') {
        $('#live').removeClass('hidden');
        if (onair_display == 'bottom'){
            $('#live').removeClass('in').addClass('bottom')
        }
    }


    $.getJSON(station_url, function (station) {
        station_img_url = station.images.station;

        getCover(song_url, station_img_url);
        coverLoop(song_url, station_img_url);
    });
</script>
</body>
</html>